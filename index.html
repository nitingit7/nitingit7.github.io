<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice King</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="module">
        import { inject } from 'https://cdn.jsdelivr.net/npm/@vercel/analytics/+esm';
        inject();
    </script>
    <script>
        import { injectSpeedInsights } from 'https://cdn.jsdelivr.net/npm/@vercel/speed-insights/+esm';
        injectSpeedInsights();
    </script>
</head>

<body>


    <div class="container main-dashboard">
        <div class="header-section-new">
            <p class="page-subtitle">Select a subject to begin your practice.</p>
        </div>

        <div class="subject-grid-new">
            <div class="subject-card-new" onclick="location.href='list.html?subject=full_test'">
                <div class="subject-icon">ğŸ†</div>
                <div class="subject-name">Full Mock Tests</div>
                <div class="subject-arrow">â†’</div>
            </div>

            <div class="subject-card-new" onclick="openSelectionModal('quant', 'Quantitative Aptitude')">
                <div class="subject-icon">ğŸ“Š</div>
                <div class="subject-name">Quantitative Aptitude</div>
                <div class="subject-arrow">â†’</div>
            </div>

            <div class="subject-card-new" onclick="openSelectionModal('reasoning', 'Reasoning Ability')">
                <div class="subject-icon">ğŸ§©</div>
                <div class="subject-name">Reasoning Ability</div>
                <div class="subject-arrow">â†’</div>
            </div>

            <div class="subject-card-new" onclick="openSelectionModal('english', 'English Language')">
                <div class="subject-icon">ğŸ“–</div>
                <div class="subject-name">English Language</div>
                <div class="subject-arrow">â†’</div>
            </div>

            <div class="subject-card-new" onclick="openSelectionModal('general', 'General Awareness')">
                <div class="subject-icon">ğŸŒ</div>
                <div class="subject-name">General Awareness</div>
                <div class="subject-arrow">â†’</div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item active">
            <div class="nav-icon">ğŸ </div>
            <div class="nav-label">Home</div>
        </a>
        <a href="tests.html" class="nav-item">
            <div class="nav-icon">ğŸ“</div>
            <div class="nav-label">Tests</div>
        </a>
        <a href="performance.html" class="nav-item">
            <div class="nav-icon">ğŸ“Š</div>
            <div class="nav-label">Performance</div>
        </a>
        <a href="profile.html" class="nav-item">
            <div class="nav-icon">ğŸ‘¤</div>
            <div class="nav-label">Profile</div>
        </a>
    </nav>

    <div id="selection-modal" class="modal-overlay" style="display: none;" onclick="closeSelectionModal(event)">
        <div class="modal-content">
            <h3 id="modal-title" style="margin-top:0;">Select Category</h3>
            <p style="color:var(--text-secondary); margin-bottom:20px;">Choose the type of practice you want:</p>

            <button class="btn-modal btn-sectional" onclick="goToTest('sectional')">
                <span class="btn-icon">ğŸ“‘</span> Sectional Test
                <small>Full subject mocks (30-40 Qs)</small>
            </button>

            <button class="btn-modal btn-topic" onclick="goToTest('topic')">
                <span class="btn-icon">ğŸ¯</span> Topic Test
                <small>Chapter-wise practice (15-20 Qs)</small>
            </button>

            <button class="btn-text-close" onclick="closeSelectionModal(null)">Cancel</button>
        </div>
    </div>

    <script>
        // --- MODAL LOGIC ---
        var currentSubject = "";

        function openSelectionModal(subject, title) {
            currentSubject = subject;
            document.getElementById('modal-title').innerText = title;
            var modal = document.getElementById('selection-modal');
            modal.style.display = "flex";
        }

        function closeSelectionModal(event) {
            // Close if clicked on overlay (background) or Cancel button
            if (!event || event.target.id === 'selection-modal' || event.target.classList.contains('btn-text-close')) {
                var modal = document.getElementById('selection-modal');
                modal.style.display = "none";
            }
        }

        function goToTest(type) {
            // type is 'sectional' or 'topic'
            // Constructs URL like: list.html?subject=quant_sectional
            var target = currentSubject + "_" + type;
            location.href = "list.html?subject=" + target;
        }

        // --- EXISTING THEME LOGIC ---
        function toggleTheme(event) {
            var chk = document.getElementById('checkbox');
            var isDark = chk.checked;

            if (!document.startViewTransition) {
                applyTheme(isDark);
                return;
            }

            var x = event.clientX;
            var y = event.clientY;
            var endRadius = Math.hypot(Math.max(x, window.innerWidth - x), Math.max(y, window.innerHeight - y));

            var transition = document.startViewTransition(() => {
                applyTheme(isDark);
            });

            transition.ready.then(() => {
                var clipPath = [`circle(0px at ${x}px ${y}px)`, `circle(${endRadius}px at ${x}px ${y}px)`];
                document.documentElement.animate(
                    { clipPath: clipPath },
                    { duration: 500, easing: 'ease-in', pseudoElement: '::view-transition-new(root)' }
                );
            });
        }

        function applyTheme(isDark) {
            if (isDark) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('site-theme', 'dark');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('site-theme', 'light');
            }
        }

        (function () {
            var savedTheme = localStorage.getItem('site-theme');
            var chk = document.getElementById('checkbox');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                if (chk) chk.checked = true;
            }
        })();

        // 1. Disable Right Click
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
            return false;
        });

        // 2. Disable Copy Shortcuts
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'c' || e.key === 'u' || e.key === 's' || e.key === 'p') {
                    e.preventDefault();
                    return false;
                }
            }
        });
    </script>
</body>

</html>

</html>