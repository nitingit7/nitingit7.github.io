<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practice King</title>
    <link rel="stylesheet" href="css/style.css">
    <script type="module">
        import { inject } from 'https://cdn.jsdelivr.net/npm/@vercel/analytics/+esm';
        inject();
    </script>
    <script>
        import { injectSpeedInsights } from 'https://cdn.jsdelivr.net/npm/@vercel/speed-insights/+esm';
        injectSpeedInsights();
    </script> 
</head>
<body>
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" onclick="toggleTheme(event)">
            <div class="slider-round"></div>
        </label>
    </div>

    <div class="container main-dashboard">
        <div class="header-section">
            <div class="title-wrapper">
                <h2 class="app-title">Practice King</h2>
                <span class="beta-badge">BETA</span>
            </div>
            <p class="subtitle">Select a subject to begin your practice.</p>
        </div>
        
        <div class="dashboard-grid">
            
            <div class="subject-card" onclick="location.href='list.html?subject=full_test'">
                <div class="card-content">
                    <div class="icon-box">üèÜ</div> 
                    <div class="text-group">
                        <strong>Full Mock Tests</strong>
                    </div>
                </div> 
                <div class="arrow-icon">‚ûú</div>
            </div>
            
            <div class="subject-card card-quant" onclick="openSelectionModal('quant', 'Quantitative Aptitude')">
                <div class="card-content">
                    <div class="icon-box">üìä</div> 
                    <div class="text-group">
                        <strong>Quantitative Aptitude</strong>
                    </div>
                </div> 
                <div class="arrow-icon">‚ûú</div>
            </div>
            
            <div class="subject-card card-reasoning" onclick="openSelectionModal('reasoning', 'Reasoning Ability')">
                <div class="card-content">
                    <div class="icon-box">üß©</div> 
                    <div class="text-group">
                        <strong>Reasoning Ability</strong>
                    </div>
                </div> 
                <div class="arrow-icon">‚ûú</div>
            </div>
            
            <div class="subject-card card-english" onclick="openSelectionModal('english', 'English Language')">
                <div class="card-content">
                    <div class="icon-box">üìñ</div> 
                    <div class="text-group">
                        <strong>English Language</strong>
                    </div>
                </div> 
                <div class="arrow-icon">‚ûú</div>
            </div>

            <div class="subject-card card-general" onclick="openSelectionModal('general', 'General Awareness')">
                <div class="card-content">
                    <div class="icon-box">üåç</div> 
                    <div class="text-group">
                        <strong>General Awareness</strong>
                    </div>
                </div> 
                <div class="arrow-icon">‚ûú</div>
            </div>

        </div>

        <div class="footer-tip">
            <p>üí° <strong>Pro Tip:</strong> Toggle the switch top-right for Dark Mode!</p>
        </div>
    </div>

    <div id="selection-modal" class="modal-overlay" style="display: none;" onclick="closeSelectionModal(event)">
        <div class="modal-content">
            <h3 id="modal-title" style="margin-top:0;">Select Category</h3>
            <p style="color:var(--text-secondary); margin-bottom:20px;">Choose the type of practice you want:</p>
            
            <button class="btn-modal btn-sectional" onclick="goToTest('sectional')">
                <span class="btn-icon">üìë</span> Sectional Test
                <small>Full subject mocks (30-40 Qs)</small>
            </button>
            
            <button class="btn-modal btn-topic" onclick="goToTest('topic')">
                <span class="btn-icon">üéØ</span> Topic Test
                <small>Chapter-wise practice (15-20 Qs)</small>
            </button>

            <button class="btn-text-close" onclick="closeSelectionModal(null)">Cancel</button>
        </div>
    </div>

    <script>
        // --- MODAL LOGIC ---
        var currentSubject = "";

        function openSelectionModal(subject, title) {
            currentSubject = subject;
            document.getElementById('modal-title').innerText = title;
            var modal = document.getElementById('selection-modal');
            modal.style.display = "flex";
            
            // Add a tiny delay for animation class if you add CSS animations
            setTimeout(() => modal.classList.add('active'), 10);
        }

        function closeSelectionModal(event) {
            // Close if clicked on overlay (background) or Cancel button
            if (!event || event.target.id === 'selection-modal' || event.target.classList.contains('btn-text-close')) {
                var modal = document.getElementById('selection-modal');
                modal.classList.remove('active');
                setTimeout(() => modal.style.display = "none", 200);
            }
        }

        function goToTest(type) {
            // type is 'sectional' or 'topic'
            // Constructs URL like: list.html?subject=quant_sectional
            var target = currentSubject + "_" + type;
            location.href = "list.html?subject=" + target;
        }

        // --- EXISTING THEME LOGIC ---
        function toggleTheme(event) {
            var chk = document.getElementById('checkbox');
            var isDark = chk.checked; 
            
            if (!document.startViewTransition) {
                applyTheme(isDark);
                return;
            }

            var x = event.clientX;
            var y = event.clientY;
            var endRadius = Math.hypot(Math.max(x, window.innerWidth - x), Math.max(y, window.innerHeight - y));

            var transition = document.startViewTransition(() => {
                applyTheme(isDark);
            });

            transition.ready.then(() => {
                var clipPath = [`circle(0px at ${x}px ${y}px)`, `circle(${endRadius}px at ${x}px ${y}px)`];
                document.documentElement.animate(
                    { clipPath: clipPath },
                    { duration: 500, easing: 'ease-in', pseudoElement: '::view-transition-new(root)' }
                );
            });
        }

        function applyTheme(isDark) {
            if(isDark) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('site-theme', 'dark');
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('site-theme', 'light');
            }
        }

        (function() {
            var savedTheme = localStorage.getItem('site-theme');
            var chk = document.getElementById('checkbox');
            if(savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                if(chk) chk.checked = true; 
            }
        })();

        // 1. Disable Right Click
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });

        // 2. Disable Copy Shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                if (e.key === 'c' || e.key === 'u' || e.key === 's' || e.key === 'p') {
                    e.preventDefault();
                    return false;
                }
            }
        });
    </script>
</body>
</html>
</html>
